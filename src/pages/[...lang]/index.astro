---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import MasterGrid from "../../components/Grid/MasterGrid.astro";
import MasterGridHeader from "../../components/MasterGridHeader.astro";
import {supportedLang, getLangFromUrl} from "../../scripts/languageParser";

export function getStaticPaths() {
  const paths = supportedLang.map((lang) => ({
    params: { lang: lang || undefined },
  }));
  return paths;
}
const lang = Astro.params.lang || getLangFromUrl(Astro.url);
const allMasters = await getCollection("masters");
const mastersTotal = allMasters.length;
const title = "Patriarchal Zen - All Zen Patriarchs";
---

<BaseLayout title={title} lang={lang}>

  <MasterGridHeader mastersTotal={mastersTotal} />

  <MasterGrid masters={allMasters} />

</BaseLayout>
<script src="../../scripts/index.js"></script>
